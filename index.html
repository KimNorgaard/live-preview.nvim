<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>/media/brianhuster/D/Projects/live-preview.nvim/doc/livepreview.txt</title>
<meta name="colorscheme" content="default"></meta>
<style>
* {font-family: monospace}
body {background-color: #14161b; color: #e0e2ea}
.Statement {font-weight: bold; color: #e0e2ea}
.Special {color: #8cf8f7}
.Function {color: #8cf8f7}
.-variable {color: #e0e2ea}
.Delimiter {color: #e0e2ea}
.DiagnosticWarn {color: #fce094}
.-spell {}
.Operator {color: #e0e2ea}
.Comment {color: #9b9ea4}
.String {color: #b3f6c0}
.Title {font-weight: bold; color: #e0e2ea}
.Underlined {text-decoration-line: underline}
</style>
</head>
<body style="display: flex">
<pre>

<span class="Title">==============================================================================
</span><span class="Title">Lua module : require(&quot;livepreview&quot;)</span>                              <span class="Statement"></span><span class="Statement">livepreview</span><span class="Statement"></span>

Live preview for markdown, asciidoc, and html files.

To work with API from this plugin, require it in your Lua code: <span class="Special"><span class="Special"></span><span class="Statement">
</span>    <span class="Statement">local</span> <span class="-variable">livepreview</span> <span class="Operator">=</span> <span class="-variable"><span class="Function"><span class="Special">require</span></span></span><span class="Delimiter">(</span><span class="String">'livepreview'</span><span class="Delimiter">)</span>
</span><span class="Special"></span>


preview_file(<span class="-variable">{filepath}</span>, <span class="-variable">{port}</span>)                  <span class="Statement"></span><span class="Statement">livepreview.preview_file()</span><span class="Statement"></span>
    Start live preview

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{filepath}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) path to the file
      • <span class="-variable">{port}</span>      (<span class="Special"></span><span class="Special">number</span><span class="Special"></span>) port to run the server on

setup(<span class="-variable">{opts}</span>)                                            <span class="Statement"></span><span class="Statement">livepreview.setup()</span><span class="Statement"></span>
    Setup live preview

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{opts}</span>  (<span class="Special"></span><span class="Special">{commands: {start: string, stop: string}, port: number, browser: string}</span><span class="Special"></span>, default: {start = &quot;LivePreview&quot;, stop = &quot;StopPreview&quot;})
                • commands: {start: string, stop: string} - commands to start
                  and stop live preview
                • port: number - port to run the server on (default: 5500)
                • browser: string - browser to open the preview in (default:
                  &quot;default&quot;). The &quot;default&quot; value will open the preview in
                  system default browser.

stop_preview()                                    <span class="Statement"></span><span class="Statement">livepreview.stop_preview()</span><span class="Statement"></span>
    Stop live preview


<span class="Title">==============================================================================
</span><span class="Title">Live Preview Module : SERVER</span>                              <span class="Statement"></span><span class="Statement">livepreview.server</span><span class="Statement"></span>

Server class for live-preview.nvim To call this class, do <span class="Special"><span class="Special"></span><span class="Statement">
</span>    <span class="Statement">local</span> <span class="-variable">Server</span> <span class="Operator">=</span> <span class="-variable"><span class="Function"><span class="Special">require</span></span></span><span class="Delimiter">(</span><span class="String">'livepreview'</span><span class="Delimiter">)</span><span class="Delimiter">.</span><span class="-variable"><span class="-variable">server</span></span><span class="Delimiter">.</span><span class="-variable"><span class="-variable">Server</span></span>
</span><span class="Special"></span>


<span class="Statement"></span><span class="Statement">Server</span><span class="Statement"></span>

    <span class="Title">Fields:</span> <span class="Title"></span>
      • <span class="-variable">{new}</span>        (<span class="Special"></span><span class="Special">fun(self: Server, webroot: string)</span><span class="Special"></span>) Constructor
      • <span class="-variable">{routes}</span>     (<span class="Special"></span><span class="Special">fun(self: Server, path: string): string</span><span class="Special"></span>) Handle routes
      • <span class="-variable">{watch_dir}</span>  (<span class="Special"></span><span class="Special">fun(self: Server, func: function)</span><span class="Special"></span>) Watch a directory
                     for changes and send a message &quot;reload&quot; to a WebSocket
                     client
      • <span class="-variable">{start}</span>      (<span class="Special"></span><span class="Special">fun(self: Server, ip: string, port: number, func: function, client: uv_tcp_t)</span><span class="Special"></span>)
                     Start the server
      • <span class="-variable">{stop}</span>       (<span class="Special"></span><span class="Special">fun(self: Server)</span><span class="Special"></span>) Stop the server


Server:new(<span class="-variable">{webroot}</span>)                        <span class="Statement"></span><span class="Statement">livepreview.server.Server:new()</span><span class="Statement"></span>
    Constructor

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{webroot}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) path to the webroot

Server:routes(<span class="-variable">{path}</span>)                     <span class="Statement"></span><span class="Statement">livepreview.server.Server:routes()</span><span class="Statement"></span>
    Handle routes

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{path}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) path from the http request

    <span class="Title">Return:</span> <span class="Title"></span>
        (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) path to the file

                                           <span class="Statement"></span><span class="Statement">livepreview.server.Server:start()</span><span class="Statement"></span>
Server:start(<span class="-variable">{ip}</span>, <span class="-variable">{port}</span>, <span class="-variable">{func}</span>, <span class="-variable">{client}</span>)
    Start the server

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{ip}</span>      (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) IP address to bind to
      • <span class="-variable">{port}</span>    (<span class="Special"></span><span class="Special">number</span><span class="Special"></span>) port to bind to
      • <span class="-variable">{func}</span>    (<span class="Special"></span><span class="Special">function</span><span class="Special"></span>)
      • <span class="-variable">{client}</span>  (<span class="Special"></span><span class="Special">uv_tcp_t</span><span class="Special"></span>) uv_tcp client

Server:stop()                               <span class="Statement"></span><span class="Statement">livepreview.server.Server:stop()</span><span class="Statement"></span>
    Stop the server

Server:watch_dir(<span class="-variable">{func}</span>)               <span class="Statement"></span><span class="Statement">livepreview.server.Server:watch_dir()</span><span class="Statement"></span>
    Watch a directory for changes and send a message &quot;reload&quot; to a WebSocket
    client

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{func}</span>  (<span class="Special"></span><span class="Special">function</span><span class="Special"></span>) function to call when a change is detected


<span class="Title">==============================================================================
</span><span class="Title">Live Preview Module : HANDLER</span>                            <span class="Statement"></span><span class="Statement">livepreview.handler</span><span class="Statement"></span>

HTTP handler module for server in live-preview.nvim To require this module, do <span class="Special"><span class="Special"></span><span class="Statement">
</span>    <span class="Statement">local</span> <span class="-variable">handler</span> <span class="Operator">=</span> <span class="-variable"><span class="Function"><span class="Special">require</span></span></span><span class="Delimiter">(</span><span class="String">'livepreview.server.handler'</span><span class="Delimiter">)</span>
</span><span class="Special"></span>


client(<span class="-variable">{client}</span>, <span class="-variable">{callback}</span>)             <span class="Statement"></span><span class="Statement">livepreview.server.handler.client()</span><span class="Statement"></span>
    Handle a client connection, read the request and send a response

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{client}</span>    (<span class="Special"></span><span class="Special">uv_tcp_t</span><span class="Special"></span>) client connection
      • <span class="-variable">{callback}</span>  (<span class="Special"></span><span class="Special">function</span><span class="Special"></span>) callback function to handle the result
                    • <span class="Special"></span><span class="Special">err</span><span class="Special"></span>: Error message, if any (nil if no error)
                    • <span class="Special"></span><span class="Special">data</span><span class="Special"></span>: Request from the client

    <span class="Title">Return:</span> <span class="Title"></span>
        (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) request from the client

request(<span class="-variable">{request}</span>)                      <span class="Statement"></span><span class="Statement">livepreview.server.handler.request()</span><span class="Statement"></span>
    Handle an HTTP request If the request is a websocket upgrade request, it
    will call websocket handshake Otherwise, if it is a GET request, return
    the path from it

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{request}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) HTTP request

    <span class="Title">Return:</span> <span class="Title"></span>
        (<span class="Special"></span><span class="Special">{path: string, if_none_match: string}?</span><span class="Special"></span>) path to the file and
        If-None-Match header

                             <span class="Statement"></span><span class="Statement">livepreview.server.handler.send_http_response()</span><span class="Statement"></span>
send_http_response(<span class="-variable">{client}</span>, <span class="-variable">{status}</span>, <span class="-variable">{content_type}</span>, <span class="-variable">{body}</span>, <span class="-variable">{headers}</span>)
    Send an HTTP response

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{client}</span>        (<span class="Special"></span><span class="Special">uv_tcp_t</span><span class="Special"></span>) client connection
      • <span class="-variable">{status}</span>        (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) for example &quot;200 OK&quot;, &quot;404 Not Found&quot;, etc.
      • <span class="-variable">{content_type}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) MIME type of the response
      • <span class="-variable">{body}</span>          (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) body of the response
      • <span class="-variable">{headers}</span>       (<span class="Special"></span><span class="Special">table</span><span class="Special"></span>) (optional) additional headers to include in
                        the response

                                     <span class="Statement"></span><span class="Statement">livepreview.server.handler.serve_file()</span><span class="Statement"></span>
serve_file(<span class="-variable">{client}</span>, <span class="-variable">{file_path}</span>)
    Serve a file to the client

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{client}</span>     (<span class="Special"></span><span class="Special">uv_tcp_t</span><span class="Special"></span>) client connection
      • <span class="-variable">{file_path}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) path to the file


<span class="Title">==============================================================================
</span><span class="Title">Live Preview Module : WEBSOCKET</span>                        <span class="Statement"></span><span class="Statement">livepreview.websocket</span><span class="Statement"></span>

WebSocket server implementation To require this module, do <span class="Special"><span class="Special"></span><span class="Statement">
</span>    <span class="Statement">local</span> <span class="-variable">websocket</span> <span class="Operator">=</span> <span class="-variable"><span class="Function"><span class="Special">require</span></span></span><span class="Delimiter">(</span><span class="String">'livepreview.server.websocket'</span><span class="Delimiter">)</span>
</span><span class="Special"></span>


                                    <span class="Statement"></span><span class="Statement">livepreview.server.websocket.handshake()</span><span class="Statement"></span>
handshake(<span class="-variable">{client}</span>, <span class="-variable">{request}</span>)
    Handle a WebSocket handshake request

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{client}</span>   (<span class="Special"></span><span class="Special">uv_tcp_t</span><span class="Special"></span>) client
      • <span class="-variable">{request}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) client request

send(<span class="-variable">{client}</span>, <span class="-variable">{message}</span>)                <span class="Statement"></span><span class="Statement">livepreview.server.websocket.send()</span><span class="Statement"></span>
    Send a message to a WebSocket client

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{client}</span>   (<span class="Special"></span><span class="Special">uv_tcp_t</span><span class="Special"></span>) client
      • <span class="-variable">{message}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) message to send

                                    <span class="Statement"></span><span class="Statement">livepreview.server.websocket.send_json()</span><span class="Statement"></span>
send_json(<span class="-variable">{client}</span>, <span class="-variable">{message}</span>)
    Send a JSON message to a WebSocket client

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{client}</span>   (<span class="Special"></span><span class="Special">uv_tcp_t</span><span class="Special"></span>) client
      • <span class="-variable">{message}</span>  (<span class="Special"></span><span class="Special">table</span><span class="Special"></span>) message to send


<span class="Title">==============================================================================
</span><span class="Title">Live Preview Module : CONTENT_TYPE</span>                  <span class="Statement"></span><span class="Statement">livepreview.content_type</span><span class="Statement"></span>

Content type module for the server To require this module, do <span class="Special"><span class="Special"></span><span class="Statement">
</span>    <span class="Statement">local</span> <span class="-variable">content_type</span> <span class="Operator">=</span> <span class="-variable"><span class="Function"><span class="Special">require</span></span></span><span class="Delimiter">(</span><span class="String">'livepreview.server.utils.content_type'</span><span class="Delimiter">)</span>
</span><span class="Special"></span>


get(<span class="-variable">{file_path}</span>)                 <span class="Statement"></span><span class="Statement">livepreview.server.utils.content_type.get()</span><span class="Statement"></span>
    Get the content type of a file

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{file_path}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) path to the file

    <span class="Title">Return:</span> <span class="Title"></span>
        (<span class="Special"></span><span class="Special">string?</span><span class="Special"></span>) content type

mime                              <span class="Statement"></span><span class="Statement">livepreview.server.utils.content_type.mime</span><span class="Statement"></span>
    Table of file extensions and their corresponding MIME types

    Example: <span class="Special"><span class="Special"></span><span class="Statement">
</span>        <span class="-variable">mime</span><span class="Delimiter">[</span><span class="String">&quot;html&quot;</span><span class="Delimiter">]</span> <span class="Comment"><span class="-spell">-- Output : &quot;text/html&quot;</span></span>
</span><span class="Special"></span>


<span class="Title">==============================================================================
</span><span class="Title">Live Preview Module : ETAG</span>                                  <span class="Statement"></span><span class="Statement">livepreview.etag</span><span class="Statement"></span>

ETag module To require this module, do <span class="Special"><span class="Special"></span><span class="Statement">
</span>    <span class="Statement">local</span> <span class="-variable">etag</span> <span class="Operator">=</span> <span class="-variable"><span class="Function"><span class="Special">require</span></span></span><span class="Delimiter">(</span><span class="String">'livepreview.server.utils.etag'</span><span class="Delimiter">)</span>
</span><span class="Special"></span>


generate(<span class="-variable">{file_path}</span>)               <span class="Statement"></span><span class="Statement">livepreview.server.utils.etag.generate()</span><span class="Statement"></span>
    Generate an ETag for a file The Etag is generated based on the
    modification time of the file

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{file_path}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) path to the file

    <span class="Title">Return:</span> <span class="Title"></span>
        (<span class="Special"></span><span class="Special">string?</span><span class="Special"></span>) ETag


<span class="Title">==============================================================================
</span><span class="Title">Live Preview Module : UTILS</span>                                <span class="Statement"></span><span class="Statement">livepreview.utils</span><span class="Statement"></span>

Utility functions for live-preview.nvim


await_term_cmd(<span class="-variable">{cmd}</span>)                     <span class="Statement"></span><span class="Statement">livepreview.utils.await_term_cmd()</span><span class="Statement"></span>
    Execute a shell command and wait for the exit

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{cmd}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) terminal command to execute. Term_cmd will use sh or
               pwsh depending on the OS

    <span class="Title">Return:</span> <span class="Title"></span>
        (<span class="Special"></span><span class="Special">table</span><span class="Special"></span>) a table with fields code, stdout, stderr, signal

get_parent_path                            <span class="Statement"></span><span class="Statement">livepreview.utils.get_parent_path</span><span class="Statement"></span>
    Get the parent path of a subpath

    Example: ```lua
    get_parent_path(&quot;/home/user/.config/nvim/lua/livepreview/utils.lua&quot;,
    &quot;/lua/livepreview/utils.lua&quot;) <span class="Special"><span class="Special"></span>
        will return &quot;/home/user/.config/nvim&quot;
</span><span class="Special"></span>

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{full_path}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>)
      • <span class="-variable">{subpath}</span>    (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>)

    <span class="Title">Return:</span> <span class="Title"></span>
        (<span class="Special"></span><span class="Special">string?</span><span class="Special"></span>)

get_path_lua_file()                    <span class="Statement"></span><span class="Statement">livepreview.utils.get_path_lua_file()</span><span class="Statement"></span>
    Get path of the Lua file where the function is called

    <span class="Title">Return:</span> <span class="Title"></span>
        (<span class="Special"></span><span class="Special">string?</span><span class="Special"></span>)

get_plugin_path()                        <span class="Statement"></span><span class="Statement">livepreview.utils.get_plugin_path()</span><span class="Statement"></span>
    Get the path where live-preview.nvim is installed

kill_port(<span class="-variable">{port}</span>)                              <span class="Statement"></span><span class="Statement">livepreview.utils.kill_port()</span><span class="Statement"></span>
    Kill a process which is not Neovim running on a port

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{port}</span>  (<span class="Special"></span><span class="Special">number</span><span class="Special"></span>)

open_browser(<span class="-variable">{path}</span>, <span class="-variable">{browser}</span>)             <span class="Statement"></span><span class="Statement">livepreview.utils.open_browser()</span><span class="Statement"></span>
    Open URL in the browser

    Example: ```lua open_browser(&quot;https://neovim.io/&quot;, &quot;firefox&quot;)
    open_browser(&quot;https://neovim.io/&quot;, &quot;flatpak run com.microsoft.Edge&quot;) <span class="Special"><span class="Special"></span>
</span><span class="Special"></span>

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{path}</span>     (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>)
      • <span class="-variable">{browser}</span>  (<span class="Special"></span><span class="Special">string?</span><span class="Special"></span>)

sha1(<span class="-variable">{val}</span>)                                         <span class="Statement"></span><span class="Statement">livepreview.utils.sha1()</span><span class="Statement"></span>
    Compute the SHA1 hash of a string.

    Copyright (C) 2007 *Free Software Foundation, Inc*.

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{val}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>)

    <span class="Title">Return:</span> <span class="Title"></span>
        (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) SHA1 hash

                                      <span class="Statement"></span><span class="Statement">livepreview.utils.supported_filetype()</span><span class="Statement"></span>
supported_filetype(<span class="-variable">{file_name}</span>)
    Check if file name has a supported filetype (html, markdown, asciidoc).
    <span class="DiagnosticWarn">Warning:</span> this function will call a Vimscript function

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{file_name}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>)

    <span class="Title">Return:</span> <span class="Title"></span>
        (<span class="Special"></span><span class="Special">filetype</span><span class="Special"></span>) string | nil

term_cmd(<span class="-variable">{cmd}</span>, <span class="-variable">{callback}</span>)                     <span class="Statement"></span><span class="Statement">livepreview.utils.term_cmd()</span><span class="Statement"></span>
    Execute a shell commands

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{cmd}</span>       (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) terminal command to execute. Term_cmd will use
                    sh or pwsh depending on the OS
      • <span class="-variable">{callback}</span>  (<span class="Special"></span><span class="Special">function?</span><span class="Special"></span>) function to call when the command finishes.
                    • code: the exit code of the command
                    • signal: the signal that killed the process
                    • stdout: the standard output of the command
                    • stderr: the standard error of the command

uv_read_file(<span class="-variable">{file_path}</span>)                   <span class="Statement"></span><span class="Statement">livepreview.utils.uv_read_file()</span><span class="Statement"></span>
    Read a file using libuv

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{file_path}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>)

uv_write_file(<span class="-variable">{file_path}</span>)                 <span class="Statement"></span><span class="Statement">livepreview.utils.uv_write_file()</span><span class="Statement"></span>
    Write a file using libuv

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{file_path}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>)


<span class="Title">==============================================================================
</span><span class="Title">Live Preview Module : HEALTH</span>                              <span class="Statement"></span><span class="Statement">livepreview.health</span><span class="Statement"></span>

To run health check for Live Preview, run <span class="Special"><span class="Special"></span><span class="Statement">
</span>    <span class="Delimiter">:</span><span class="Statement">checkhealth</span> livepreview
</span><span class="Special"></span>

This will check if your Neovim version is compatible with Live Preview and if
the commands to open browser are available.


check()                                           <span class="Statement"></span><span class="Statement">livepreview.health.check()</span><span class="Statement"></span>
    Run health check for Live Preview. This can also be run using
    <span class="Special"></span><span class="Special">:checkhealth livepreview</span><span class="Special"></span>

    <span class="Title">See also:</span> <span class="Title"></span>
      • <span class="Underlined">https://neovim.io/doc/user/health.html</span>

is_compatible(<span class="-variable">{ver}</span>, <span class="-variable">{range}</span>)             <span class="Statement"></span><span class="Statement">livepreview.health.is_compatible()</span><span class="Statement"></span>
    Check if the version is compatible with the range

    <span class="Title">Parameters:</span> <span class="Title"></span>
      • <span class="-variable">{ver}</span>    (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) version to check. Example: &quot;0.10.1&quot;
      • <span class="-variable">{range}</span>  (<span class="Special"></span><span class="Special">string</span><span class="Special"></span>) range to check against. Example: &quot;&gt;=0.10.0&quot;

    <span class="Title">Return:</span> <span class="Title"></span>
        (<span class="Special"></span><span class="Special">boolean</span><span class="Special"></span>) true if compatible, false otherwise


 <span class="Statement">vim:tw=78:ts=8:sw=4:sts=4:et:ft=help:norl:
</span>
</pre>
</body>
</html>
